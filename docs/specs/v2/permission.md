# [WIP] 権限

- ロール(`role`): ギルドのメンバーに付与される役割 権限の集合体
    - ロールに紐づく権限はカンマ区切りで保存する
- 権限`permission` : 以下の通り
    - 管理者が設定する、ユーザーが**別のユーザーに対して**何かしらのアクションの実行を 許可、又は禁止するもの
    - 管理者が設定する、ユーザーがチャンネル or ギルド内でできることを **許可、又は禁止**するもの
    - 管理者が明示的に設定しなかった場合は 禁止 したものとみなすものとする
    - 実行の許可は `true:0` 、禁止は`false:1`と表記する
    - 権限の表記は可変長符号なし整数型とする

## 権限構造 : TODO

- **チャンネルの権限の変更**のできるユーザー及び管理者は、チャンネルに設定できる権限のうち、種類を問わずこれを設定できるものとする
- チャンネルカテゴリー、ギルドも同様とする
- 上位の概念(ギルド > カテゴリ > チャンネル )で相反する権限設定がされていた場合は、**上位の概念と同じ設定しかできない**ものとする

## 権限表
権限は64ビット符号なし整数(uint64)で表す  
値は権限が有効であるかないかを指定するビットが何ビット目にあるかを示す数字  
例: ADMINISTRATORを設定したいとき:
```
PERMISSION = PERMISSION | 0b1000
```
例2: ADMINISTRATORが設定されているか確かめるとき
```
(PERMISSION & 0b1000) == 0b1000
```

| 権限名                    | 値   | 備考                           |
|------------------------|-----|------------------------------|
| CREATE_INVITE          | 1   | 招待の作成                        |
| KICK_MEMBER            | 2   | メンバーのキック                     |
| BAN_MEMBER             | 3   | メンバーのBAN                     |
| ADMINISTRATOR          | 4   | 全権限の許可                       |
| MANAGE_CHANNEL         | 5   | チャンネルの管理                     |
| MANAGE_GUILD           | 6   | ギルド設定の管理                     |
| MANAGE_EMOJI           | 7   | ギルド絵文字の管理                    |
| VIEW_CHANNEL           | 8   | チャンネルの閲覧                     |
| SEND_MESSAGES          | 9   | メッセージの送信                     |
| MANAGE_EMBED           | 10  | リンクの埋め込み表示の有効化、<br> 埋め込みの非表示 |
| SEND_MEDIAS            | 11  | メディアのメッセージへの添付               |
| CHANGE_NICKNAME        | 12  | 他人のニックネームを変更                 |
| SEND_MENTION           | 13  | メンション                        |
| MANAGE_MESSAGES        | 14  | メッセージの管理(削除)                 |
| SEND_EVERYONE_MENTIONS | 15  | everyoneメンションの送信             |





